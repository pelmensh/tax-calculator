<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Калькулятор налогов</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
    select, input, button { width: 100%; padding: 10px; margin: 10px 0; }
  </style>
</head>
<body>
  <h2>Калькулятор налогов</h2>

  <label>Выберите статус:</label>
  <select id="status" onchange="updateOptions()">
    <option value="ip">ИП</option>
    <option value="self">Самозанятый</option>
  </select>

  <div id="tax-type-group">
    <label>Система налогообложения:</label>
    <select id="taxType">
      <option value="usn6">УСН Доходы (6%)</option>
      <option value="usn15">УСН Доходы - Расходы (15%)</option>
    </select>
  </div>

  <label>Доход (₽):</label>
  <input type="number" id="income" placeholder="Например, 500000">

  <label>Расходы (₽):</label>
  <input type="number" id="expense" placeholder="Если есть">

  <button onclick="calculate()">Рассчитать</button>

  <h3 id="result"></h3>

  <script>
    function updateOptions() {
      const status = document.getElementById('status').value;
      const taxGroup = document.getElementById('tax-type-group');
      taxGroup.style.display = (status === 'ip') ? 'block' : 'none';
    }

    function calculate() {
      const status = document.getElementById('status').value;
      const income = parseFloat(document.getElementById('income').value) || 0;
      const expense = parseFloat(document.getElementById('expense').value) || 0;
      let tax = 0;

      if (status === 'self') {
        tax = income * 0.06;
      } else {
        const type = document.getElementById('taxType').value;
        if (type === 'usn6') {
          tax = income * 0.06;
        } else if (type === 'usn15') {
          tax = Math.max(0, (income - expense) * 0.15);
        }
      }

      document.getElementById('result').innerText = `Ваш налог: ${Math.round(tax)} ₽`;
    }

    Telegram.WebApp.ready();
  </script>
</body>
</html>
